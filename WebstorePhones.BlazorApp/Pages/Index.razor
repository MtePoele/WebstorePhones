@page "/"
@using Domain.Entities
@using WebstorePhones.Domain.Interfaces
@inject ApiClient apiClient

<PhoneInfo phone="@pho"></PhoneInfo>

<UnorderedList>
    <Repeater Items="@phones">
        <PhoneInfo phone="@context"></PhoneInfo>
    </Repeater>
</UnorderedList>

@code {
    List<Phone> phones = new();
    Phone pho = new();

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        //Works
        phones = await apiClient.Get();

        //TODO Doesn't work yet
        pho = await apiClient.Get(10007);

        //Works but needs authorization now
        apiClient.Post(new Phone()
            {
                Brand = new Brand()
                {
                    BrandName = "Apple"
                },
                Type = "Blazor",
                Description = "Desc",
                PriceWithTax = 20,
                Stock = 5
            });
    }
}
