@page "/"
@using Domain.Entities
@using WebstorePhones.Domain.Interfaces
@inject ApiClient apiClient


<UnorderedList>
    <Repeater Items="@phones">
        <PhoneInfo phone="@context"></PhoneInfo>
    </Repeater>
</UnorderedList>

@code {
    List<Phone> phones = new();

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        phones = await apiClient.Get();

        // TODO Remove testcode
        //apiClient.Post(new Phone()
        //    {
        //        Brand = new Brand()
        //        {
        //            BrandName = "Apple"
        //        },
        //        Type = "Blazor",
        //        Description = "Desc",
        //        PriceWithTax = 20,
        //        Stock = 5
        //    });
    }
}
